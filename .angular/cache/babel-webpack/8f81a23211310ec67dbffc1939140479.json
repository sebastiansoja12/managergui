{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { throwError, timer } from 'rxjs';\nimport { map, share } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../auth/service/route-service.service\";\nimport * as i2 from \"../../auth/service/parcel.service\";\nimport * as i3 from \"ngx-webstorage\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../auth/model/parcel\";\nimport * as i6 from \"../../auth/model/route\";\nimport * as i7 from \"ngx-toastr\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"@angular/common\";\n\nfunction RouteGetComponent_tr_117_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵelementStart(2, \"div\", 23);\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵelement(4, \"i\", 52);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 53);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"td\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const route_r1 = ctx.$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(route_r1.parcel.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(route_r1.created);\n  }\n}\n\nexport let RouteGetComponent = /*#__PURE__*/(() => {\n  class RouteGetComponent {\n    constructor(routeService, parcelService, localStorage, router, parcel, route, toastr, activatedRoute) {\n      this.routeService = routeService;\n      this.parcelService = parcelService;\n      this.localStorage = localStorage;\n      this.router = router;\n      this.parcel = parcel;\n      this.route = route;\n      this.toastr = toastr;\n      this.activatedRoute = activatedRoute;\n      this.time = new Date();\n      this.rxTime = new Date();\n    }\n\n    ngOnInit() {\n      this.getRouteForm = new FormGroup({\n        id: new FormControl('', Validators.required),\n        custom: new FormControl('', Validators.required)\n      });\n      this.routeService.findAll().subscribe(data => {\n        this.routes = data;\n      });\n      this.routeService.findAll().subscribe(data => {\n        this.routesList = data;\n      });\n      this.routeService.findTemporaryRoutes().subscribe(data => {\n        this.temporaryRoutesList = data;\n      });\n      this.intervalId = setInterval(() => {\n        this.time = new Date();\n      }, 1000); // Using RxJS Timer\n\n      this.subscription = timer(0, 1000).pipe(map(() => new Date()), share()).subscribe(time => {\n        this.rxTime = time;\n      });\n    }\n\n    getRoute() {\n      this.parcel.id = this.getRouteForm.get('id').value;\n      this.route.parcel = this.parcel;\n      this.routeService.saveTemporary(this.route).subscribe(data => {\n        this.isError = false;\n      }, error => {\n        this.isError = true;\n        window.location.assign('/');\n        this.toastr.success('Błędny kod lub paczka została już zarejestrowana');\n        throwError(error);\n      });\n      window.location.reload();\n    }\n\n    printLabel() {\n      this.parcel.id = this.getRouteForm.get('id').value;\n      window.location.href = 'http://localhost:8080/api/parcels/' + this.parcel.id + '/label';\n    }\n\n    toCSV() {\n      this.parcel.id = this.getRouteForm.get('id').value;\n      window.location.href = 'http://localhost:8080/api/parcels/' + this.parcel.id + '/csv';\n    } // tslint:disable-next-line:typedef use-lifecycle-interface\n\n\n    ngOnDestroy() {\n      clearInterval(this.intervalId);\n\n      if (this.subscription) {\n        this.subscription.unsubscribe();\n      }\n    }\n\n    saveTemporaryRoutes() {\n      this.routeService.save(this.temporaryRoutesList).subscribe(data => {\n        this.isError = false;\n      }, error => {\n        this.isError = true;\n        window.location.assign('/');\n        this.toastr.success('Błąd!');\n        throwError(error);\n      });\n      window.location.reload();\n    }\n\n  }\n\n  RouteGetComponent.ɵfac = function RouteGetComponent_Factory(t) {\n    return new (t || RouteGetComponent)(i0.ɵɵdirectiveInject(i1.RouteService), i0.ɵɵdirectiveInject(i2.ParcelService), i0.ɵɵdirectiveInject(i3.LocalStorageService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.Parcel), i0.ɵɵdirectiveInject(i6.Route), i0.ɵɵdirectiveInject(i7.ToastrService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n\n  RouteGetComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RouteGetComponent,\n    selectors: [[\"app-route-get\"]],\n    decls: 118,\n    vars: 11,\n    consts: [[1, \"route-get-section\"], [1, \"container\"], [1, \"row\"], [1, \"col-12\", \"col-lg-3\"], [1, \"card\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"d-grid\"], [1, \"btn\", \"btn-primary\", \"submit\"], [1, \"fm-menu\"], [\"href\", \"javascript:\", 1, \"list-group\"], [1, \"bx\", \"bx-devices\", \"me-2\"], [1, \"bx\", \"bx-plug\", \"me-2\"], [1, \"bx\", \"bx-trash-alt\", \"me-2\"], [1, \"bx\", \"bx-image\", \"me-2\"], [1, \"bx\", \"bx-beer\", \"me-2\"], [1, \"mb-0\", \"text-primary\", \"font-weight-bold\"], [1, \"mb-0\", \"mt-2\"], [1, \"text-secondary\"], [1, \"float-end\", \"text-primary\"], [1, \"progress\", \"mt-3\", 2, \"height\", \"7px\"], [\"role\", \"progressbar\", 1, \"progress-bar\", \"bg-warning\"], [1, \"mt-3\"], [1, \"d-flex\", \"align-items-center\"], [1, \"fm-file-box\", \"bg-light-primary\", \"text-primary\"], [1, \"bx\", \"bx-image\"], [1, \"flex-grow-1\", \"ms-2\"], [1, \"mb-0\"], [1, \"text-primary\", \"mb-0\"], [1, \"col-12\", \"col-lg-9\"], [1, \"fm-search\"], [1, \"input-group\", \"input-group-lg\"], [1, \"col-sm-12\", \"col-lg-12\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Numer przesy\\u0142ki\", \"id\", \"id\", \"name\", \"id\", 1, \"form-control\", 3, \"formControlName\"], [1, \"input-group-append\"], [1, \"input-group-text\"], [1, \"row\", \"mt-3\"], [1, \"col-12\", \"col-lg-4\", 3, \"click\"], [1, \"card\", \"shadow-none\", \"border\", \"radius-15\"], [1, \"fm-icon-box\", \"radius-15\", \"text-dark\"], [1, \"bx\", \"bxs-file-doc\", \"text-success\"], [1, \"ms-auto\", \"font-24\"], [1, \"mt-3\", \"mb-0\"], [1, \"mb-1\", \"mt-4\"], [1, \"progress\", 2, \"height\", \"7px\"], [1, \"ml-sm-auto\"], [\"href\", \"javascript:;\", \"routerLink\", \"/routes\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\"], [1, \"table-responsive\", \"mt-3\"], [1, \"table\", \"table-striped\", \"table-hover\", \"table-sm\", \"mb-0\"], [1, \"bx\", \"bx-up-arrow-alt\", \"ms-2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"bx\", \"bxs-file-pdf\", \"me-2\", \"font-24\", \"text-danger\"], [1, \"font-weight-bold\", \"text-danger\"]],\n    template: function RouteGetComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"form\", 6);\n        i0.ɵɵlistener(\"ngSubmit\", function RouteGetComponent_Template_form_ngSubmit_6_listener() {\n          return ctx.saveTemporaryRoutes();\n        });\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵelementStart(8, \"button\", 8);\n        i0.ɵɵtext(9, \"Zapisz\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 9);\n        i0.ɵɵelementStart(11, \"a\", 10);\n        i0.ɵɵelement(12, \"i\", 11);\n        i0.ɵɵelementStart(13, \"span\");\n        i0.ɵɵtext(14, \"Edytor\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"a\", 10);\n        i0.ɵɵelement(16, \"i\", 12);\n        i0.ɵɵelementStart(17, \"span\");\n        i0.ɵɵtext(18, \"\\u015Aledzenie\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"a\", 10);\n        i0.ɵɵelement(20, \"i\", 13);\n        i0.ɵɵelementStart(21, \"span\");\n        i0.ɵɵtext(22, \"Usuwanie przesy\\u0142ek\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"a\", 10);\n        i0.ɵɵelement(24, \"i\", 14);\n        i0.ɵɵelementStart(25, \"span\");\n        i0.ɵɵtext(26, \"Etykiety\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"a\", 10);\n        i0.ɵɵelement(28, \"i\", 15);\n        i0.ɵɵelementStart(29, \"span\");\n        i0.ɵɵtext(30, \"Podania\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 4);\n        i0.ɵɵelementStart(32, \"div\", 5);\n        i0.ɵɵelementStart(33, \"h5\", 16);\n        i0.ɵɵelementStart(34, \"div\");\n        i0.ɵɵelementStart(35, \"div\");\n        i0.ɵɵtext(36);\n        i0.ɵɵpipe(37, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"p\", 17);\n        i0.ɵɵelementStart(39, \"span\", 18);\n        i0.ɵɵtext(40, \"Wykorzystane\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"span\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"div\", 20);\n        i0.ɵɵelement(43, \"div\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(44, \"div\", 22);\n        i0.ɵɵelementStart(45, \"div\", 23);\n        i0.ɵɵelementStart(46, \"div\", 24);\n        i0.ɵɵelement(47, \"i\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"div\", 26);\n        i0.ɵɵelementStart(49, \"h6\", 27);\n        i0.ɵɵtext(50, \"Liczba przesy\\u0142ek\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"h6\", 28);\n        i0.ɵɵtext(52);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"div\", 29);\n        i0.ɵɵelementStart(54, \"div\", 4);\n        i0.ɵɵelementStart(55, \"div\", 5);\n        i0.ɵɵelementStart(56, \"div\", 30);\n        i0.ɵɵelementStart(57, \"div\", 27);\n        i0.ɵɵelementStart(58, \"form\", 6);\n        i0.ɵɵlistener(\"ngSubmit\", function RouteGetComponent_Template_form_ngSubmit_58_listener() {\n          return ctx.getRoute();\n        });\n        i0.ɵɵelementStart(59, \"div\", 31);\n        i0.ɵɵelementStart(60, \"div\", 32);\n        i0.ɵɵelementStart(61, \"div\", 33);\n        i0.ɵɵelement(62, \"input\", 34);\n        i0.ɵɵelementStart(63, \"div\", 35);\n        i0.ɵɵelement(64, \"span\", 36);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"div\", 37);\n        i0.ɵɵelementStart(66, \"div\", 38);\n        i0.ɵɵlistener(\"click\", function RouteGetComponent_Template_div_click_66_listener() {\n          return ctx.getRoute();\n        });\n        i0.ɵɵelementStart(67, \"div\", 39);\n        i0.ɵɵelementStart(68, \"div\", 5);\n        i0.ɵɵelementStart(69, \"div\", 23);\n        i0.ɵɵelementStart(70, \"div\", 40);\n        i0.ɵɵelement(71, \"i\", 41);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(72, \"div\", 42);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(73, \"h5\", 43);\n        i0.ɵɵtext(74, \"Zarejestruj przesy\\u0142k\\u0119\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(75, \"p\", 44);\n        i0.ɵɵelement(76, \"div\", 45);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(77, \"div\", 38);\n        i0.ɵɵlistener(\"click\", function RouteGetComponent_Template_div_click_77_listener() {\n          return ctx.printLabel();\n        });\n        i0.ɵɵelementStart(78, \"div\", 39);\n        i0.ɵɵelementStart(79, \"div\", 5);\n        i0.ɵɵelementStart(80, \"div\", 23);\n        i0.ɵɵelementStart(81, \"div\", 40);\n        i0.ɵɵelement(82, \"i\", 41);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(83, \"div\", 42);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(84, \"h5\", 43);\n        i0.ɵɵtext(85, \"Generuj etykiet\\u0119\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(86, \"p\", 44);\n        i0.ɵɵelement(87, \"div\", 45);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(88, \"div\", 38);\n        i0.ɵɵlistener(\"click\", function RouteGetComponent_Template_div_click_88_listener() {\n          return ctx.toCSV();\n        });\n        i0.ɵɵelementStart(89, \"div\", 39);\n        i0.ɵɵelementStart(90, \"div\", 5);\n        i0.ɵɵelementStart(91, \"div\", 23);\n        i0.ɵɵelementStart(92, \"div\", 40);\n        i0.ɵɵelement(93, \"i\", 41);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(94, \"div\", 42);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(95, \"h5\", 43);\n        i0.ɵɵtext(96, \"Do CSV\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(97, \"p\", 44);\n        i0.ɵɵelement(98, \"div\", 45);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(99, \"div\", 23);\n        i0.ɵɵelementStart(100, \"div\");\n        i0.ɵɵelementStart(101, \"h5\", 27);\n        i0.ɵɵtext(102, \"Ostatnie przesy\\u0142ki\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(103, \"div\", 46);\n        i0.ɵɵelementStart(104, \"a\", 47);\n        i0.ɵɵtext(105, \"Poka\\u017C wszystkie\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(106, \"div\", 48);\n        i0.ɵɵelementStart(107, \"table\", 49);\n        i0.ɵɵelementStart(108, \"thead\");\n        i0.ɵɵelementStart(109, \"tr\");\n        i0.ɵɵelementStart(110, \"th\");\n        i0.ɵɵtext(111, \"Kod \");\n        i0.ɵɵelement(112, \"i\", 50);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(113, \"th\");\n        i0.ɵɵtext(114, \"Utworzono\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(115, \"th\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(116, \"tbody\");\n        i0.ɵɵtemplate(117, RouteGetComponent_tr_117_Template, 10, 2, \"tr\", 51);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.getRouteForm);\n        i0.ɵɵadvance(30);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(37, 8, ctx.rxTime, \"hh:mm:ss a\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵstyleProp(\"width\", ctx.temporaryRoutesList.length + \"%\");\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate(ctx.temporaryRoutesList.length);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.getRouteForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formControlName\", \"id\");\n        i0.ɵɵadvance(55);\n        i0.ɵɵproperty(\"ngForOf\", ctx.routesList);\n      }\n    },\n    directives: [i8.ɵNgNoValidate, i8.NgControlStatusGroup, i8.FormGroupDirective, i8.DefaultValueAccessor, i8.NgControlStatus, i8.FormControlName, i4.RouterLinkWithHref, i9.NgForOf],\n    pipes: [i9.DatePipe],\n    styles: [\".route-get-section[_ngcontent-%COMP%]{margin:100px 100px 100px auto;position:center}\"]\n  });\n  return RouteGetComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}